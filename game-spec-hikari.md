# 🎮 ゲーム企画書「ひかりちゃんのゲームワールド 〜吸い込まれた世界〜」

## 📝 ストーリー原案（子供の音声入力から）

> 今からストーリーが待っています。光ちゃんがゲームの世界に吸い込まれてしまいました。それでプレイヤーが現れました。それはひかりちゃんです。うんこがいっぱい点数稼ぎます。100個集めたらまず1面クリア。のゲーム。ミミズが大量にいてミミズを100個切ったらクリア。ミミズを切れば切るほどたくさん増えていきます。それで次は包丁ゲームです。包丁ゲームは違うプレイヤーを指すとお金がもらえます。その人を100個やればいいんです。その中にガチャを引いて鬼か鬼じゃない子を決めます。その後レースが始まります。バイクはとても本格的できちんとしたバイクに乗って、光ちゃんはかわいい状態になりながら空を飛んだり山を越えたり、星を取ったり、うんこを踏んだりしながら走っていきます。次光ちゃんをします。それでメイクをした後には違うプレイヤーにもメイクをしてあげます。それで変なメイクどれだけたくさんできたかをやって100回できたら勝ちです。最後の最後に流していく。そういうゲームです。あともう1個面が実は隠しステージがあります。これクリアしたら隠しステージになります。そこではお化けから隠れるゲームです。色々の世界にやってきました。

---

## ✨ ストーリー整理

**ひかりちゃん**はある日、ゲームの世界に吸い込まれてしまった！
元の世界に戻るには、ゲームの世界のステージを全部クリアするしかない！

ひかりちゃんは各ステージで色々なミニゲームに挑戦する。
💩を集めたり、ミミズを切ったり、バイクでレースしたり、変なメイクをしたり…。
全ステージクリアすると最後に全部流して元の世界へ！

でも実は**隠しステージ**がある。
そこは「色々の世界」— お化けから隠れるホラーステージ！

---

## 🎯 Claude Codeへの指示

上記のストーリーをもとに、以下の仕様でブラウザゲームを作ってください。

### ゲーム基本設定

- **タイトル**: 「ひかりちゃんのゲームワールド 〜吸い込まれた世界〜」
- **ゲーム形式**: ブラウザで遊べるHTML+CSS+JavaScript（ファイル分割構成）
- **ジャンル**: ミニゲーム集（各ステージが別ジャンル）
- **対象年齢**: 子供向け（小学生）
- **操作方法**: クリック／タップ（スマホ・タブレット対応）
- **プレイ時間目安**: 20〜30分（全ステージ通し）
- **雰囲気**: カラフル＋カオス＋かわいい。ひかりちゃんは常にかわいい

### 技術要件

- 外部ライブラリ不要（Canvas APIまたはDOM操作で実装）
- レスポンシブ対応（PC・タブレット両方で遊べる）
- 日本語テキスト
- 絵文字ベースのビジュアル

### ファイル構成（適度に分割すること）

```
game/
├── index.html              # エントリーポイント（HTMLのみ）
├── css/
│   └── style.css           # 全体のスタイル・アニメーション
├── js/
│   ├── main.js             # ゲーム初期化・ステージ管理
│   ├── scenes.js           # シーン遷移（タイトル/ステージ選択/クリア）
│   ├── stage1-poop.js      # ステージ1: うんこ集め
│   ├── stage2-worm.js      # ステージ2: ミミズ切り
│   ├── stage3-knife.js     # ステージ3: 包丁ゲーム（鬼ごっこ）
│   ├── stage4-race.js      # ステージ4: バイクレース
│   ├── stage5-makeup.js    # ステージ5: 変なメイク
│   ├── stage6-flush.js     # ステージ6: 最後に流す
│   ├── secret-ghost.js     # 隠しステージ: お化けかくれんぼ
│   ├── hikari.js           # ひかりちゃんのキャラクター管理
│   ├── ui.js               # 共通UI（スコア/カウンター/演出）
│   ├── audio.js            # Web Audio API サウンド管理
│   └── data.js             # 全ステージの設定データ・セリフ
└── README.md               # 遊び方の説明
```

#### 分割の方針
- **1ファイル300行以下**を目安に分割する
- **各ステージを独立したファイル**にする（修正しやすい）
- `data.js` にデータを集約し、ロジックと分離する
- JSファイルはES Modules（import/export）で連携する
- `index.html` は `<script type="module" src="js/main.js">` で読み込む

---

## 🗺️ ゲーム構成

### オープニング

1. ひかりちゃん👧✨が部屋でゲームをしている
2. 画面が光り出す💫
3. 「きゃー！吸い込まれるー！」
4. 画面がぐるぐる回転する演出🌀
5. ひかりちゃんがゲームの世界に到着
6. 「ここは…ゲームの世界？全部クリアしないと帰れないみたい！」
7. ステージ選択画面へ（最初はステージ1だけ解放）

---

### 🟫 ステージ1：うんこ集め（コレクション）

**「💩を100個集めろ！」**

- **ルール**: 画面中に降ってくる💩をタップして集める
- **操作**: 💩をタップ/クリック → カウンター+1
- **演出**:
  - 💩が画面上からランダムに落ちてくる
  - タップすると「ポイッ！」と消える＋スコア表示
  - 時間が経つと💩の落ちるスピードが上がる
  - たまに金色の💩（ゴールデンうんこ✨💩）が出現 → 5個分！
  - 偽物（💩に見せかけた爆弾💣）を取ると-10個
- **クリア条件**: 100個集める
- **ひかりちゃんの反応**:
  - 10個: 「がんばる！」
  - 50個: 「半分きた！くさーい！」
  - 90個: 「もうちょっと！」
  - 100個: 「やったー！クリア！」💩✨

---

### 🪱 ステージ2：ミミズ切り（スラッシュアクション）

**「ミミズを100匹切れ！切るほど増えるぞ！」**

- **ルール**: 画面に出現するミミズ🪱をスワイプ/クリックで切る
- **操作**: ミミズの上をスワイプ（スマホ）またはクリック＆ドラッグ（PC）
- **ミミズの特性**:
  - 切ると2匹に分裂する！（フルーツニンジャ的だけど増える）
  - 分裂したミミズも切れる（カウント+1）
  - どんどん増えて画面がミミズだらけになる
  - 小さくなったミミズは消える（一定サイズ以下）
- **演出**:
  - 切った瞬間にスラッシュエフェクト⚡
  - ミミズがうにょうにょ動く
  - 画面がミミズで埋まると「うわーー！」テキスト
- **クリア条件**: 累計100匹切る
- **ひかりちゃんの反応**:
  - 「きゃー！ミミズ！」
  - 「切っても切っても増えるー！」
  - 「100匹いったー！もう見たくない！」

---

### 🔪 ステージ3：包丁ゲーム（鬼ごっこ＋ガチャ）

**「ガチャで鬼を決めて、100回タッチしろ！」**

- **フェーズ1: ガチャ**
  - 画面にガチャマシン🎰が表示
  - タップで回す → 鬼👹か鬼じゃない子😊が決まる
  - プレイヤー（ひかりちゃん）と相手キャラ4〜5人で抽選
  - 鬼になった子が追いかける役（包丁🔪を持っている）
  - ※子供向けなので包丁はおもちゃの剣⚔️やハリセン📣に変更してもよい

- **フェーズ2: 鬼ごっこ**
  - ひかりちゃんが鬼の場合:
    - 逃げるキャラをタップして捕まえる
    - 捕まえると💰+1（お金がもらえる）
    - 100回タッチでクリア
  - ひかりちゃんが鬼じゃない場合:
    - 鬼から逃げる！画面をスワイプして逃げ回る
    - 鬼に捕まらずに生き残ればクリア
- **演出**:
  - 鬼決定の瞬間: ドラムロール🥁→「鬼は…👹○○！」
  - 追いかけっこ: キャラが画面を走り回る
  - タッチ成功: 「ペシッ！」エフェクト＋💰

---

### 🏍️ ステージ4：ひかりちゃんバイクレース

**「本格バイクで空を飛べ！星を取れ！うんこを踏むな！」**

- **ルール**: 横スクロールレース。障害物を避けてゴールを目指す
- **操作**:
  - タップ/スペース: ジャンプ（空を飛ぶ🕊️）
  - 長押し: 高くジャンプ（山を越える⛰️）
  - 何もしない: 地面を走る
- **コース要素**:
  - ⭐ **星**: 取るとスコアアップ（キラキラ演出）
  - 💩 **うんこ**: 踏むとスピードダウン＋「ぎゃー！」
  - ⛰️ **山**: ジャンプで越える
  - ☁️ **雲**: 空を飛んで雲の上を走れる
  - 🌈 **虹**: ボーナスゾーン（星がいっぱい）
- **ひかりちゃんの見た目**:
  - バイク🏍️に乗ったかわいいひかりちゃん👧✨
  - 空を飛ぶ時: 髪がなびく演出✨
  - うんこ踏んだ時: 😱顔
- **クリア条件**: ゴール🏁に到達
- **演出**:
  - 背景がどんどん変わる（草原→山→空→虹）
  - スピード感のあるスクロール
  - ゴール時: 「かっこいい〜！」ポーズ✨

---

### 💄 ステージ5：変なメイクバトル

**「変なメイクを100回やったら勝ち！」**

- **フェーズ1: ひかりちゃんにメイク**
  - 顔の画面が表示される（大きな丸顔＋目・鼻・口）
  - メイク道具を選んでタップで顔に塗る
  - **道具**:
    - 💄 口紅（色々な色：赤・青・緑・虹色）
    - 👁️ アイシャドウ（キラキラ・どぎつい色）
    - 🌈 チーク（虹色・水玉・星柄）
    - ✏️ 眉毛ペン（太眉・つながり眉・渦巻き眉）
    - ⭐ デコ（星・ハート・💩スタンプ）
    - 🎨 フェイスペイント（動物柄・宇宙柄）
  - 完成すると変度スコアが出る（変であるほど高得点）

- **フェーズ2: 他のキャラにもメイク**
  - NPCキャラが次々登場
  - 同じようにメイクしてあげる
  - NPCの反応: 「え…これ私？😂」「すごい顔…🤣」「…芸術的！🎨」
  - 変なメイク判定で⭐1〜3

- **クリア条件**: メイク合計100回（1回の完成で1カウント）
  - ※実際は10〜15人にメイクすれば100アクション到達でクリアにする
- **演出**:
  - メイク中: キラキラエフェクト✨
  - 完成時: ビフォーアフター表示
  - 変度MAX: 画面が揺れる＋「へんてこ大賞！🏆」

---

### 🚽 ステージ6：最後に全部流す（フィナーレ）

**「全部まとめて流しちゃえ！」**

- **演出ステージ**（プレイヤー参加型）
- 画面に今までのステージの要素が全部出てくる
  - 💩うんこ、🪱ミミズ、💄メイク道具、⭐星…
- 巨大なトイレ🚽が画面に登場
- プレイヤーが「流すボタン」を連打！
- 連打するたびにジャーッ🌊と流れていく
- 全部流れたら…ゲームの世界が崩壊し始める
- 「帰れる！元の世界に帰れるよ！」
- ひかりちゃんが光に包まれて元の世界へ✨

### エンディング

- ひかりちゃんが自分の部屋に戻ってくる
- 「楽しかった〜！…でも もういいかな😅」
- スタッフロール（各ステージのハイライト）
- **「隠しステージが解放されました！」の通知**

---

### 👻 隠しステージ：お化けかくれんぼ 〜色々の世界〜

**全ステージクリア後に解放**

**「お化けから隠れろ！見つかったらおしまい！」**

- **場所**: 「色々の世界」— 背景がカラフルに変化し続ける不思議な空間
- **ルール**:
  - お化け👻が画面内をうろうろしている
  - ひかりちゃんは隠れ場所（📦箱、🌳木、🪨岩など）に隠れる
  - タップで隠れ場所に入る/出る
  - お化けが近づいたら隠れる、離れたら移動する
  - ゴール🚪にたどり着けばクリア
- **色々の世界の演出**:
  - 背景色が数秒ごとにランダムに変わる（🔴🔵🟢🟡🟣）
  - 隠れ場所の色も変わるので見つけにくい
  - お化けの動きも色が変わるたびに速度が変わる
- **お化けの種類**:
  - 👻 普通のお化け（ゆっくり巡回）
  - 💀 ガイコツ（速い。一直線に追いかけてくる）
  - 🎃 カボチャお化け（ランダムに瞬間移動）
- **見つかった場合**: 「みーつけた👻！」→ やり直し
- **クリア**: 「色々の世界を抜け出した！伝説のプレイヤー！🌟」

---

## 🎨 ビジュアル・演出

- **スタイル**: とにかくカラフル＋ポップ。各ステージで背景色やテーマが変わる
- **ひかりちゃん**:
  - 👧✨ かわいい女の子。常にキラキラ
  - 各ステージで衣装が変わる（バイクスーツ、メイクアーティスト服など）
  - リアクションが豊富（😊😱🤣😤✨）
- **各ステージのカラーテーマ**:
  - ステージ1（うんこ）: 茶色＋金色
  - ステージ2（ミミズ）: 緑＋土色
  - ステージ3（包丁/鬼ごっこ）: 赤＋オレンジ
  - ステージ4（レース）: 青空＋虹色
  - ステージ5（メイク）: ピンク＋キラキラ
  - ステージ6（流す）: 水色＋白
  - 隠しステージ: 全色がランダムに変化

## 🔊 サウンド

- Web Audio APIで簡易サウンド:
  - 各ステージ固有のBGM（テンポやムードを変える）
  - タップ音（ステージごとに違う音）
  - クリアファンファーレ
  - ひかりちゃんの声風SE（「やったー！」「きゃー！」「くさーい！」）
  - トイレの水流音（ステージ6）
  - お化けの「ヒュ〜」音（隠しステージ）

## 📊 ゲームシステム

- **ミニゲーム集形式**: 各ステージ独立したゲーム
- **進行**: ステージ1→6を順番にクリアしていく（スキップ不可）
- **共通カウンター**: 各ステージ100回/100個の目標（わかりやすい）
- **隠しステージ**: 全クリア後に解放
- **リトライ**: 各ステージ何度でもやり直し可能
- **難易度**: 子供が楽しめるバランス。失敗してもすぐリトライ

## 📱 必須UI要素

- タイトル画面（ひかりちゃん＋ゲーム世界のポータル演出）
- オープニングストーリー（テキスト送り）
- ステージ選択画面（クリア済みに⭐マーク。隠しは🔒→解放後👻）
- 各ステージ画面（ステージ固有のUI＋共通のスコア/カウンター表示）
- ステージクリア演出（「クリア！」＋次へボタン）
- エンディング画面
- 隠しステージ解放通知

---

## 🚀 Claude Codeでの実行方法

### 方法1: --dangerously-skip-permissions で全自動（おすすめ）

```bash
claude --dangerously-skip-permissions "このゲーム企画書の仕様に沿って、ファイル構成どおりに分割してブラウザゲームを作ってください。ミニゲーム集で各ステージが全く違うジャンルです。途中で確認せず最後まで一気に完成させてください。" -f game-spec-hikari.md
```

### 方法2: allowedTools で必要な権限だけ許可

```bash
claude --allowedTools "Edit,Write,Bash(cat*),Bash(open*),Bash(mkdir*)" "このゲーム企画書の仕様に沿って、ファイル構成どおりに分割してブラウザゲームを作ってください。途中で確認せず最後まで一気に完成させてください。" -f game-spec-hikari.md
```

### 💡 プロンプトのコツ

- **「途中で確認せず最後まで一気に完成させて」**
- **「質問せずに自分で判断して進めて」**
- **「完成したらブラウザで開いて」**
